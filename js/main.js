"use strict";function toggleSpinner(){spinner.toggleClass("active")}function postman(){$(".postman").toggleClass("open")}function showMessage(e){$(".postman .body").html(e),postman(),setTimeout(function(){$(".postman").removeClass("open")},7e3)}function updateSpinnerMessage(e){$(".loader .text").text(e)}function scrollpage(e){$("html,body").animate({scrollTop:$(e).offset().top},"slow")}function activateInput(){console.log(event.target),$(".signup-form label").animate({top:"0"})}function signup(e){console.log("signup init"),e.preventDefault(),updateSpinnerMessage("Thank you for joining UmbrellaNote!"),toggleSpinner();var a=$("#signup-name").val(),n=$("#signup-email").val(),t=$("#signup-password").val();axios({method:"post",url:pikachu+"/api/signup",headers:{Accept:"application/json","Content-Type":"application/json"},data:{name:a,email:n,password:t}}).then(function(a){toggleSpinner(),console.log(a),"success"==a.data&&($(".signin.modal input.email").val(n),$(".signin.modal input.password").val(t),signin(e),toggleModal(".signin.modal")),"user exists"==a.data&&showMessage("A user with that email address already exists.")})}function signin(e){updateSpinnerMessage("Welcome back"),toggleSpinner(),e.preventDefault();var a=$(".signin.modal input.email").val(),n=$(".signin.modal input.password").val();axios({method:"post",url:pikachu+"/oauth/token",data:{grant_type:"password",client_id:client_id,client_secret:client_secret,username:a,password:n,scope:""}}).then(function(e){200==e.status&&(localStorage.access_token=e.data.access_token,console.log(e.data.access_token),showMessage("üòä Welcome back"),updateSpinnerMessage("Welcome"),toggleModal(".signin.modal"),toggleLanding(),localStorage.signedIn="true",getUser(),changeSignInStatus()),toggleSpinner()}).catch(function(e){showMessage("Unable to login üò¢"),toggleSpinner()})}function logout(){toggleSpinner(),updateSpinnerMessage("Logging out. üôã‚Äç"),axios({method:"post",url:pikachu+"/api/logout",headers:{Accept:"application/json",Authorization:"Bearer "+localStorage.access_token},data:{client_id:client_id}}).then(function(e){console.log(e.data),localStorage.signedIn="false",localStorage.access_token=" ",showMessage("Logged Out"),changeSignInStatus(),updateUserDetailsView(),toggleLanding(),toggleSpinner()})}function getUser(){axios({method:"get",url:pikachu+"/api/user",headers:{Accept:"application/json",Authorization:"Bearer "+localStorage.access_token}}).then(function(e){console.log(e.data),localStorage.name=e.data.name,localStorage.premium=e.data.premium,localStorage.email=e.data.email,localStorage.id=e.data.id,updateUserDetailsView()})}function changeSignInStatus(){"true"==localStorage.signedIn?($("header .login-signup-wrap").hide(),$(".signout-buttons").show()):($("header .login-signup-wrap").show(),$(".signout-buttons").hide())}function updateUserDetailsView(){"false"==localStorage.signedIn?($(".username").html(""),$(".useremail").html("")):($(".username").html(localStorage.name),$(".useremail").html(localStorage.email))}function toggleModal(e){$(e).toggleClass("open")}function toggleLanding(){$(".landing").toggle(),$(".dashboard").toggle()}function initUmbrella(){"true"==localStorage.signedIn&&(toggleLanding(),showMessage("Welcome back! üòä"),updateUserDetailsView(),changeSignInStatus())}var landingPage=$(".landing"),dashboardPage=$(".dashboard"),spinner=$(".loader");initUmbrella();var client_id="3",client_secret="9MrTC8QV9aXaKY2OsObAbKi9m5Pt7sejNwa6raOi",pikachu="http://localhost:8000";